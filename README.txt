ЦЕЛЬ - Создание сервиса по аналогии как CARDSON.
---ОПИСАНИЕ---
Архитектура по концепции монолит.
Backend - Flask, MySQL, SQL Alchemy, requests, pandas
Frontend - Bootstrap 5 (шаблон Bootsrap Dash), Java script
БД представлена таблицами: User, Image, Post, Wallet, Comments, WbPost, Payouts, Payouts_bank
Брэнд не создается - все заливается в один брэнд.
После одобрения администратором КТ автоматически загружается на ВБ по апи в один кабинет.
Файлы должны записываться по ..website/static/uploads
А урлы картинок в таблицу Images с ../uploads
Формат артикулов - user_id-post_id, 1-313, 17-580
Буду ли я разбивать артикул по товарам кружка, футболка или все будут 17-478, 17-479 ...?
--для раздела админки--
Если вызывать еще раз добавление, то текст поверх создается. ??
Получается добавить картинку одну когда КТ уже создана с текстом. ??
---
https://flask.ivan-shamaev.ru/python-flask-initial-setting-vps-server/?ysclid=lybad170dc67410233
https://devhops.ru/i/flask/vhost/?ysclid=lyb90ajvkw535268215
https://beget.com/ru/kb/how-to/web-apps/python#ustanovka-mikrofreymvorka-flask
https://www.youtube.com/watch?v=CyD2W17u0CI telegram
- как распаковать проект на сервер?
https://github.com/osteamdev/beget-deploy-flask/blob/main/README.md (!)
https://devhops.ru/i/flask/vhost/?ysclid=lymx163b19773731316
https://beget.com/ru/kb/how-to/web-apps/python#ustanovka-mikrofreymvorka-flask
https://timeweb.cloud/docs/apps/deploying-backend-applications/flask?ysclid=lymx19ulcv743617606
https://www.youtube.com/channel/UCLr7DxWBT0NWZv_w4uvLJaw
https://coder-folder.com/posts/229/deploi-prilozheniia-flask-uwsgi-docker-nginx-postgresql?ysclid=lyr6rihy2966365767
https://coder-folder.com/posts/182/deploi-flask-prilozheniia-na-server-linux

Задачи:
- настроить обновление через гит на бегете
- закрыть в приват github
- установка окружения gg
- post/id не раскрывается меню добавить карточку товара когда на странице нахожусь
- /create_post добавить обучение созданию сео описаний при создании кт
- /create_post добавить требование к картинкам
- сделать утилиту по записи данных для каждого пользователя ежедневно в БД
- /status могут выходить в кабинете - карточка опубликована, отклонена и т.д.
- /admin добавить фильтрацию на странице дашборд
- /admin добавить к Карточки товаров с картинками (67) - цифру количества
- /admin правка выдачи в таблице всех постов пользователя - сейчас всех выходят
- /admin добавить пагинацию страниц "из стольки-то"
- /superadmin post/id при отклонении или принятии возврат идет в общий список а не список модерации ?
- /superadmin при архивировании не появляется задача для администратора в супер-админке
- /create_post, post/id как будет определен порядок мокапов? сделать проверку на то что мокапы названы pic-1, pic-2 и тд
- /comments вывод комментариев редактора красным или более заметным сделать
- /mail после первой продажи отправлять поздравления с первой продажей
- /statistics убрать total_balance из главное тк ошибка выходит  total_balance = int(total_balance)
- /statistics механика расчета общего дохода накопленного и к выплате
- /statistics - total_balance и меню выпадающее settings на не выходит на некоторых страницах
- /statistics сделать запись в модель продаж в статистике по дням
- /statistics считать накопительным итогом количество продаж всех КТ автора (не заказов) по дням в таблице
- /statistics не работает - косяки
- /statistics - проверка текущей даты, тк если дата больше то выходит ошибка
- /statistics добавить кэширование в statistics чтобы не грузить постоянно сервер
- добавить значок телеграмма для помощи как в adfinity.pro
- лучше все пароли из settings убрать в .env и gitignore поставить игнор
- /registration сделать регистрацию с подтверждением email или по аккаунту vk.com / yandex.ru
- задеплоить и подключить работу по апи с ВБ со своими карточками товара, которые занести в базу
- type hinting больше внимания уделять, часто из-за этого ошибка получается в типах
- чтобы меньше падал сайт обернуть try - except
- для функций можно использоваться try logger.debug / except loger.warning / finally logger.debug
- на post/post_id не работает выпадающее меню settings/ logout
- наверное таблицу Wallet лучше заменить на settings
- добавить celery для управления задачами
- добавить seaborn во фласк
- может pydantic добавить для проверки пользователя при регистрации
- вынести все в settings токены для диска для БД и другое
- /status можно градиентом сделать статусы как в шаблоне bootstrap

---done---
18.07
- обновил модули  в проекте в myvenv
- подключил gunicorn и nginx
- закрыл git как private
- добавил переменную окружения для подключения к БД в .env
17.07
- подключился к БД удаленной с приложения фласк
16.07
- deploy ошибка ModuleNotFoundError: No module named 'flask_bcrypt'
- подключиться к git репозиторию https://habr.com/ru/articles/820473/
14.07
- /create post - ошибки НЕ выходят никакие при добавлении КТ (4.7 выходит)
- может добавить Рейтинг для авторов, на этой странице можно было бы выводить список из 30 авторов
- изменил логотип
13.07
- /statistics заполнение таблицы по доходам пользователя за день
- добавить таблицу Statistica в БД и в нее записывать данные, чтобы по API не подсоединяться
- добавить таблицу Rating в БД и модель
- правка base.html шаблона и всех html файлов с другой разметкой
- автоматически меняющийся год в подписи в футере
12.07
- сгруппировать по templates html файлы для каждого из блоков kt, payouts, statistic, status..
- /superadmin после публикации на ВБ картинка исходник закидывается на яндекс.диск https://www.youtube.com/watch?v=BfFTgkaHziA
11.07
- таблица вывода постов пользователя на главной странице
- добавить подтверждение, что картинка исходник ваша без нарушения авторских прав в /create_post и /post/id
- /edit не работает запись
10.07
- /admin вместо картинок вывод делать в таблице - так компактнее будет
- /post/id не выводятся мокапы, не сохраняются в папке
- /admin вывод на главной в виде таблицы, так компактнее и нет гемора с картинкой
9.07
- /message после добавления карточки товара опублиоукной на ВБ высылается письмо
- /superadmin после нажатия на Опубликовать - все заливается - и добавляется ссылка на ВБ на товар - запись в таблицу WB
- /create_post при загрузке pdf выходит ошибка
- ошибка Ошибка: 'NoneType' object is not subscriptable при добавлении одной картинки большой
- размер мокапа должен быть меньше 10 мб проверку сделать
- /comments сейчас всегда пишется Редкатор: что не правильно
- реализовать задачу загрузки карточки товара на ВБ, тк на локальном не получалось (!)
- /superadmin механика добавления КТ на ВБ
- когда есть пробел в названии картинки также баг выходит (400 ошибка)
- добавляется почему-то только одна картинка из папки
- добавить к валидации мокапов необходимость размера 700 на 900 пикселей
- /create_post не добавляются множественные картинки, только одна добавляется !
- /post/post_id сделать перезагрузку страницы после добавления Картинки-исходни и мокапов (actualno)
- добавить вывод различных оповещений на страницах сайта - сообщений
- /post/id/ не правильная логика отправки на модерацию, нет проверки (!)
- post/350/ при замене множественных картинок они не сохраняются (!)
- post/99 когда нажимаешь на Заменить картинкИ, а картинка не загружена то выходит ошибка БД
- /post/id форма сделана не правильно, не нужно загружать по отдельности
- /post/id не встроена валидация картинок при повторном добавлении
- /registration при добавлении нового пользователя добавлять данные настроек в таблицу settings (wallet)
- разбить проект на модули https://github.com/MikesoWeb/Blog-on-Flask/blob/main/blog/main/routes.py сейчас уже много файлов
- /payouts отвалилось при отправке заявки ошибка с датой
- поставить ограничение на множественную загрузку мокапов, если больше 5 загружают то они не отображаются в таблице
- /create_post сделать кнопку сохранить как черновик
- /create_post добавить отправку на модерацию - при нажатии на кнопку не отправляет
- сохранение картинок в формате .jpeg тк он меньше места занимает
- /admin Обучение выделяется цветом вместе с "Заказать выплату"
- при сохранении картинок надо менять названия pic-0 на название артикула 17-350.png
- create_post сделать фиолетовым поля загрузки картинок - добавить css стиль
- /create_post выходит ошибка, что не удается прочитать изображение
- наверное Баланс должен быть не в Настройках
- убрать настройки settings как шестеренку и в другое место
- /settings не работает при переходе из главной страницы
- /settings добавить функцию смены пароля
- при переключении в Заказать выплату сдвигается основное меню в верстке
- /payouts добавить страницу вывода денег id заявки, дата подачи, дата обработки, сумма - доход за все время, доступнок выводу
- /payouts/ не выводит ФИО и другие данные
- вывод вначале при переходе на страницу payouts всех заявок
- /superadmin вывод постов для модерации на главной делать в обратном порядке по ID поста
- /settings при создании пользователя создавать запись в Wallet (models) иначе потом не получится взять данные
- при замене одиночной картинки она не сохраняется
- исправил ошибку при добавлении картинки и ее валидации, а также выход ошибки при неправальном DPI size
- /login при пустых полях и нажатии "Войти" выходит ошибка AlchemySQL
- модули статистики, добавления КТ, настроек вывести в отдельные файлы .py
- после опубликовано вылетает в wb-post из админки если снова пытаться зайти на пост
- реализация механизма логинизации авторизации
- артикул может генериться автоматически в самом начале не надо его вставлять
- при добавлении без картинок запись она не появляется в списке КТ
- когда пользователь из сессии выпадает, то неправильная запись файла идет в None папку
- /superadmin отправить на АПИ ВБ карточку с картинками при нажатии опубликовать
- /superadmin выход при нажатии на кнопку добавить комментарий
- если перехожу на пост жму Сохранить как черновик, потом "Дашборд" и вылетает в index (!)
- после смены статуса вылетает в индекc
- добавить ограничение на ввод данных КТ Наименование и описание количество символов в форме
- функция load_images.py не работает правильно для загрузки файлов на ВБ (т.е требует загрузки файла src)
- при статусе архивировано все кнопки пропадать должны
- при удалении поста с комментарием выходит ошибка
- /registration после добавления пользователя преходит на простую запись нет переадресации в кабинет или в логинизацию
- /create_post нельзя одинаковые файлы с названиями закидывать - они перезаписываются
- добавить blueprint в проект - разбить его на модули
- разбить все на модули для структурирования
- функция Image.replace_image не правильно перезаписывает множество файлов
- убрал метод Image.replace и разбиле его на два отдельных метода
- решить задачу с загрузкой в static/uploads
- в Комментарии записывать изменение статуса
- у админа убрать возможность добавлять посты (после закрытия сессии перенаправляется)
- /create_post не перенаправляет после создания картинки (меню - добавить кт)
- таблицы у меня не связаны через SQLAlchemy некоторые связаны некоторые нет
- сделать возможность добавления комментария к статье админом
- в редактировании КТ при загрузке исходной картинке иногда она заменяет собой неосновную картинку
- добавить возможность заменять картинки (мокапы) при редактировании КТ
- в создании новой карточки не подгружаются картинки внизу
- при авторизации выходит не admin, а пустое страница без КТ
- сделать кабинет администратора со списком - где он модерирует
- не работает редактирование уже добавленного поста /posts/245/edit
- на выходе делать jsonify маршрута
- вывод внизу post.html не правильный (он не учитывает первую картинку или вторую)
- в редактировании КТ при загрузке исходной картинки она не загружается на сервер
- авторизация: если я залогинен и захожу на сайт то перехожу в / и там ничего нет
- если отправлено На модерацию, то править уже нельзя
- добавлять как Черновик, т.е. иметь возможность править
- в статусе "на модерации" возможность отменить модерацию и вернуться к черновику
- добавить шаблоны jinja в код формирования страниц base.html
- добавить загрузку исходного картинки к КТ
- при удалении карточки надо чтобы удалялись картинки поста
- можно добавить кнопку Запомнить меня в авторизацию - https://www.youtube.com/watch?v=L_o0wRaZJdg
- в бд в таблицу images записывются урлы картинки
- при добавлении КТ в брэнде создается запись в БД MySQL - при публикации уже отправка по АПИ ВБ
- установить шаблон админки на бутстрапе https://cssauthor.com/free-bootstrap-5-templates/
- сделать загрузку множества картинок
- сделать методы для классов post, wallet, user - CRUD (Create, Read, Update, Delete)
- продумать логику связи таблиц БД
- сделать логинизацию
- добавить текста и дизайна для первой страницы лэндинг
- получение данных по api в бэкэнд
- разобраться какой БД буду пользоваться (MySQL)
- сделать подключение к БД
- занести запись в БД
- сделать аутентификацию
- добавить bootsrtap шаблон в index.html
